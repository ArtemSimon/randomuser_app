# Запуск приложения с помощью Docker Compose

Это руководство поможет вам запустить приложение FastAPI с PostgreSQL и Nginx с использованием Docker Compose.

# Предварительные требования

    Установленный Docker (инструкция по установке)

    Установленный Docker Compose (инструкция по установке)

    Файлы окружения (если не созданы, см. раздел "Настройка окружения")

# Для  того чтобы были доступны запросы по homepage сделайте следующие шаги

Добавьте запись в файл hosts:

```
sudo nano /etc/hosts
```

Добавьте строку:

```
127.0.0.1 homepage
```

Сохраните файл (Ctrl+O, Enter, Ctrl+X)

# Настройка окружения

Я оставил в репозитории все .env файлы.

postgres.env - для PostgreSQL:`

```
POSTGRES_USER=ваш_пользователь
POSTGRES_PASSWORD=ваш_пароль
POSTGRES_DB=ваша_база_данных
```

randomuser.env - для приложения FastAPI (укажите те же данные, что и для PostgreSQL):

```
DB_USER=ваш_пользователь
DB_PASS=ваш_пароль
DB_NAME=ваша_база_данных
DB_HOST=pg_randomuser
DB_PORT=5432
```
# Запуск приложения

Клонируйте репозиторий

```
git clone https://github.com/ArtemSimon/randomuser_app.git
```

Перейдите в директорию проекта

```
cd randomuser_app
```

Выполните команду:

```
docker-compose up -d
```


# Остановка приложения

Для остановки всех сервисов выполните:

```
docker-compose down
```

Если вы хотите также удалить том с данными PostgreSQL, выполните:

```
docker-compose down -v
```
# Проверка работы сервисов

Вы можете проверить статус работы контейнеров с помощью команды:

```
docker-compose ps
```

# Структура сервисов

    FastAPI приложение - доступно на порту 8000 (внутри сети Docker)



    PostgreSQL - база данных на порту 5432 (внутри сети Docker)

    Nginx - веб-сервер на порту 80 (доступен с хоста)

Все сервисы объединены в единую сеть Docker randomuser_network.


# Обьяснение 

Почему я выбрал Fast API
1) Высокая производительность - асинхронная обработка запросов критична при работе с внешними API
2) Встроенная валидация данных - удобно для обработки ответов от randomuser.me
3) Автогенерация документации (Swagger/OpenAPI)
4) Поддержка асинхронных операций - важно для загрузки 1000+ пользователей
5) В 3-5 раз выше производительность по сравнению с Flask/Django при аналогичных задачах

Почему выбрал PostgreSQL
1) Единственно правильная СУБД для структурированных пользовательских данных
2) Поддержка JSONB позволяет хранить оригинальную структуру данных от randomuser.me без потерь
3) Оптимизированная работа с большими объемами данных (100к+ записей) благодаря:
    + Эффективному планировщику запросов
    + Многовариантным индексам (B-tree, GIN, GiST)
4) Масштабируемость - сможет обрабатывать десятки тысяч записей
